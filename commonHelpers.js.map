{"version":3,"file":"commonHelpers.js","sources":["../js/pixabay-api.js","../js/render-functions.js","../src/main.js"],"sourcesContent":["const KEY = '42472601-e2efb745d6431960b7108569a';\n\nexport function fetchImages(search) {\n    const url = `https://pixabay.com/api/?key=${KEY}&q=${search}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    return fetch(url).then((res) => {\n        if (!res.ok) {\n            throw new Error(`HTTP error! Status: ${res.status}`);\n        }\n        return res.json();\n    });\n}\n","//бібліотеки\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst LOADER = document.getElementById('loader');\nconst GALLERY = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function showImages(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<div class=\"card\">\n      <a href=\"${largeImageURL}\" data-lightbox=\"gallery\" data-title=\"${tags}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n      </a>\n      <div class=\"card-border\">\n      <div class=\"param\">\n      <p class=\"title\">Likes:</p>\n      <p class=\"title\">Views:</p>\n      <p class=\"title\">Comments:</p>\n      <p class=\"title\">Downloads:</p>\n       </div>\n        <div class=\"param\">\n      <p class=\"title-value\">${likes}</p>\n      <p class=\"title-value\">${views}</p>\n      <p class=\"title-value\">${comments}</p>\n      <p class=\"title-value\">${downloads}</p>\n       </div>\n      </div>\n    </div>`);\n\n    GALLERY.innerHTML = markup.join('');\n\n    const imgLoad = GALLERY.querySelectorAll('img');\n    const loadDelay = Array.from(imgLoad).map(img =>\n        new Promise((resolve, reject) => {\n            img.onload = resolve;\n            img.onerror = reject;\n        })\n    );\n\n    Promise.all(loadDelay)\n        .then(() => {\n            LOADER.style.display = 'none';\n        })\n        .catch((error) => {\n            console.error('Error loading images:', error);\n        });\n\n    lightbox.refresh()\n}","/*\n\n    1. Створення інтерфейсу\n        1.1. Створити HTML-структуру для форми пошуку, індикатора завантаження, галереї та карток зображень.\n        1.2. Підключити необхідні бібліотеки для індикатора завантаження ('css-loader', 'iziToast', 'SimpleLightbox').\n        1.3. Створити стилі для елементів інтерфейсу у CSS.\n\n    2. Обробка подій користувача\n        2.1. Написати JS-код для обробки події відправки форми пошуку.\n        2.2. Перевірити, чи введено ключове слово для пошуку, та вивести відповідне повідомлення, якщо поле порожнє.\n        2.3. Показувати індикатор завантаження перед відправкою запиту на бекенд.\n    \n    3. HTTP-запити до Pixabay API\n        3.1. Використати 'fetch' для виклику Pixabay API з введеним користувачем ключовим словом та необхідними параметрами.\n        3.2. Обробити відповідь в форматі JSON та перевірити, чи має відповідь коректну структуру.\n\n    4. Обробка результатів\n        4.1. При отриманні відповіді від бекенда, приховуйте індикатор завантаження.\n        4.2. Перевіряйте, чи отримано зображення від бекенда. Якщо так, виводьте їх в галерею.\n        4.3. Якщо ні, виведіть повідомлення про відсутність результатів.\n\n    5. Відображення зображень у галереї\n        5.1. Створити функцію для додавання карток зображень до галереї.\n        5.2. Для кожного отриманого зображення створити DOM-елемент і додати його до галереї.\n        5.3. Забезпечити можливість відкривати великі версії зображення у модальному вікні за допомогою SimpleLightbox.\n\n    6. Оновлення галереї\n        6.1. Перед пошуком за новим ключовим словом очистити галерію, щоб уникнути змішаних результатів.\n\n    7. Обробка помилок\n        7.1. Використати обробники  then() та catch() для відловлення можливих помилок під час виконання HTTP-запитів та їх обробки. \n        7.2. Вивести повідомлення про помилку та приховати індикатор завантаження.\n\n    8. Оновлення SimpleLightbox\n        8.1. Після додавання нових елементів до галереї викликати метод refresh() для оновлення SimpleLightbox.\n\n*/\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from \"../js/pixabay-api\";\nimport { showImages } from \"../js/render-functions\";\n\nconst LOADER = document.getElementById('loader');\nconst GALLERY = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst SEARCH_FORM = document.getElementById('search-form');\nconst SEARCH_INPUT = document.getElementById('search-input');\n\n\nSEARCH_FORM.addEventListener('submit', function (event) {\n    event.preventDefault();\n    const query = SEARCH_INPUT.value.trim();\n\n    if (query === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term!',\n            theme: 'dark',\n            position: 'topRight',\n            backgroundColor: '#ef4040',\n            messageColor: '#fafafb',\n            iconUrl: '../img/error.svg',\n        });\n        return;\n    }\n\n\n    LOADER.style.display = 'block';\n\n    GALLERY.innerHTML = \"\";\n\n\n    fetchImages(query)\n        .then((data) => {\n            setTimeout(() => {\n                LOADER.style.display = 'none';\n            }, 1500);\n           \n            if (data.hits.length === 0) {\n                iziToast.warning({\n                    title: 'No results',\n                    message: 'Sorry, there are no images matching your search.Please try again!',\n                     theme: 'dark',\n                    position: 'topRight',\n                    backgroundColor: '#ffa000',\n                    messageColor: '#fafafb',\n                     iconUrl: '../img/caution.svg',\n                });\n            } else {\n                showImages(data.hits);\n            }\n        })\n        .catch((error) => {\n            LOADER.style.display = 'none';\n\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again!'\n            });\n            console.error('Error fetching images:', error);\n        });\n});\n\n\n\n\n    \n\n\n"],"names":["KEY","fetchImages","search","url","res","LOADER","GALLERY","lightbox","SimpleLightbox","showImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgLoad","loadDelay","img","resolve","reject","error","SEARCH_FORM","SEARCH_INPUT","event","query","iziToast","data"],"mappings":"6vBAAA,MAAMA,EAAM,qCAEL,SAASC,EAAYC,EAAQ,CAChC,MAAMC,EAAM,gCAAgCH,CAAG,MAAME,CAAM,2DAE3D,OAAO,MAAMC,CAAG,EAAE,KAAMC,GAAQ,CAC5B,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAM,uBAAuBA,EAAI,MAAM,EAAE,EAEvD,OAAOA,EAAI,MACnB,CAAK,CACL,CCJA,MAAMC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAWC,EAAQ,CAC/B,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC/F;AAAA,iBACSL,CAAa,yCAAyCC,CAAI;AAAA,oBACvDF,CAAY,UAAUE,CAAI,YAAYA,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAU/BC,CAAK;AAAA,+BACLC,CAAK;AAAA,+BACLC,CAAQ;AAAA,+BACRC,CAAS;AAAA;AAAA;AAAA,WAG7B,EAEPZ,EAAQ,UAAYK,EAAO,KAAK,EAAE,EAElC,MAAMQ,EAAUb,EAAQ,iBAAiB,KAAK,EACxCc,EAAY,MAAM,KAAKD,CAAO,EAAE,IAAIE,GACtC,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC7BF,EAAI,OAASC,EACbD,EAAI,QAAUE,CAC1B,CAAS,CACT,EAEI,QAAQ,IAAIH,CAAS,EAChB,KAAK,IAAM,CACRf,EAAO,MAAM,QAAU,MACnC,CAAS,EACA,MAAOmB,GAAU,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CACxD,CAAS,EAELjB,EAAS,QAAS,CACtB,CCPA,MAAMF,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,eAAe,SAAS,EAChC,IAAIE,EAAe,YAAY,EAChD,MAAMiB,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAe,SAAS,eAAe,cAAc,EAG3DD,EAAY,iBAAiB,SAAU,SAAUE,EAAO,CACpDA,EAAM,eAAc,EACpB,MAAMC,EAAQF,EAAa,MAAM,KAAI,EAErC,GAAIE,IAAU,GAAI,CACdC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACT,MAAO,OACP,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,QAAS,kBACrB,CAAS,EACD,MACH,CAGDxB,EAAO,MAAM,QAAU,QAEvBC,EAAQ,UAAY,GAGpBL,EAAY2B,CAAK,EACZ,KAAME,GAAS,CACZ,WAAW,IAAM,CACbzB,EAAO,MAAM,QAAU,MAC1B,EAAE,IAAI,EAEHyB,EAAK,KAAK,SAAW,EACrBD,EAAS,QAAQ,CACb,MAAO,aACP,QAAS,oEACR,MAAO,OACR,SAAU,WACV,gBAAiB,UACjB,aAAc,UACb,QAAS,oBAC9B,CAAiB,EAEDpB,EAAWqB,EAAK,IAAI,CAEpC,CAAS,EACA,MAAON,GAAU,CACdnB,EAAO,MAAM,QAAU,OAEvBwB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,4DACzB,CAAa,EACD,QAAQ,MAAM,yBAA0BL,CAAK,CACzD,CAAS,CACT,CAAC"}